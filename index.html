
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Sprint</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="min-h-screen flex">
    <aside class="w-60 bg-white shadow p-4" id="sidebarNav">
      <div class="text-lg font-bold mb-4">Admin Sprint</div>
      <nav class="space-y-2">
        <a href="#" class="nav-item block px-3 py-2 rounded text-gray-700 bg-gray-100 text-gray-900" data-view="dashboard">Dashboard</a>
        <a href="#" class="nav-item block px-3 py-2 rounded text-gray-700" data-view="control">Control de subtareas</a>
        <a href="#" class="nav-item block px-3 py-2 rounded text-gray-700" data-view="sprint">Registrar sprint</a>
        <a href="#" class="nav-item block px-3 py-2 rounded text-gray-700" data-view="upload">Cargas CSV</a>
      </nav>
    </aside>
    <main class="flex-1 p-6 space-y-6">
      <section id="view-dashboard">
        <header class="mb-4">
          <div class="text-2xl font-bold" id="sprintName">Sprint</div>
          <div class="text-sm text-gray-500" id="sprintDates">—</div>
        </header>
        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="bg-white p-4 rounded shadow"><div class="text-xs text-gray-500">Total hrs sprint</div><div id="kpiTotal" class="text-2xl font-bold">—</div></div>
          <div class="bg-white p-4 rounded shadow"><div class="text-xs text-gray-500">Hrs pendientes</div><div id="kpiPendientes" class="text-2xl font-bold">—</div></div>
          <div class="bg-white p-4 rounded shadow"><div class="text-xs text-gray-500">Hrs terminadas</div><div id="kpiTerminadas" class="text-2xl font-bold">—</div></div>
          <div class="bg-white p-4 rounded shadow"><div class="text-xs text-gray-500">% avance</div><div id="kpiAvance" class="text-2xl font-bold">—</div></div>
        </section>
        <section class="bg-white rounded shadow p-4 h-72">
          <div class="flex items-center justify-between mb-2"><div class="font-semibold">Burndown</div><button id="btnRecalc" class="text-sm px-3 py-1 rounded bg-gray-100 hover:bg-gray-200">Reconstruir</button></div>
          <div class="h-56"><canvas id="burndownChart"></canvas></div>
          <div id="bdMsg" class="text-xs text-gray-500 mt-2">—</div>
          <div class="overflow-auto mt-4">
            <table class="w-full text-sm">
              <thead><tr class="text-left text-gray-500"><th class="py-2 pr-4">Día</th><th class="py-2 pr-4">Fecha</th><th class="py-2 pr-4">Estimación</th><th class="py-2 pr-4">Real</th><th class="py-2 pr-4">Manual</th></tr></thead>
              <tbody id="bdBody"></tbody>
            </table>
          </div>
        </section>
        <section class="bg-white rounded shadow p-4"><div class="font-semibold mb-3">Avance por lista</div><div id="avanceListas" class="space-y-3"></div></section>
        <section class="bg-white rounded shadow p-4"><div class="flex items-center justify-between mb-3"><div class="font-semibold">Hoy — por Historia</div><div class="text-xs text-gray-500">Distribución por tipo</div></div><div id="avanceHU" class="space-y-3"></div></section>
        <section class="bg-white rounded shadow p-4"><div class="font-semibold mb-3">Hoy — por participante</div><div id="avanceOwners" class="space-y-3"></div></section>
      </section>
      <section id="view-control" class="hidden">
        <div class="bg-white rounded shadow p-4">
          <div class="flex items-center justify-between mb-3"><div class="font-semibold">Control de subtareas</div><div class="flex items-center gap-2"><input id="searchSub" placeholder="Buscar..." class="px-3 py-1 rounded border" /><select id="pageSize" class="px-2 py-1 rounded border"><option>50</option><option>100</option><option>200</option></select></div></div>
          <div class="overflow-auto"><table class="w-full text-sm"><thead><tr class="text-left text-gray-500"><th class="py-2 pr-4">Folio</th><th class="py-2 pr-4">Título</th><th class="py-2 pr-4">Estado</th><th class="py-2 pr-4">Propietario</th><th class="py-2 pr-4">Terminado manual</th><th class="py-2 pr-4">Visible</th><th class="py-2 pr-4">Lista</th></tr></thead><tbody id="subBody"></tbody></table></div>
          <div class="flex items-center justify-end gap-3 mt-2 text-sm text-gray-600"><span id="countSub">0 de 0</span><button id="prevSub" class="px-3 py-1 rounded bg-gray-100 hover:bg-gray-200">Anterior</button><span id="pageSub">1 / 1</span><button id="nextSub" class="px-3 py-1 rounded bg-gray-100 hover:bg-gray-200">Siguiente</button></div>
        </div>
      </section>
      <section id="view-sprint" class="hidden">
        <div class="bg-white rounded shadow p-4 space-y-3">
          <div class="font-semibold">Registrar sprint</div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
            <input id="f_nombre" class="px-3 py-2 rounded border" placeholder="Nombre del sprint" />
            <input id="f_inicio" type="date" class="px-3 py-2 rounded border" />
            <input id="f_fin" type="date" class="px-3 py-2 rounded border" />
            <input id="f_hsprint" type="number" step="0.01" class="px-3 py-2 rounded border" placeholder="Horas totales" />
            <input id="f_hxd" type="number" step="0.01" class="px-3 py-2 rounded border" placeholder="Horas por día (capacidad)" />
            <button id="f_save" class="px-3 py-2 rounded bg-blue-600 text-white">Guardar</button>
          </div>
          <div id="f_msg" class="text-sm text-gray-600">—</div>
        </div>
      </section>
      <section id="view-upload" class="hidden">
        <div class="bg-white rounded shadow p-4 space-y-3">
          <div class="font-semibold">Cargas CSV</div>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div><div class="text-sm font-medium mb-1">historias.csv (opcional)</div><input type="file" id="fileHistorias" accept=".csv" class="block w-full" /></div>
            <div><div class="text-sm font-medium mb-1">sub.csv (opcional)</div><input type="file" id="fileSub" accept=".csv" class="block w-full" /></div>
          </div>
          <div class="flex items-center gap-2"><button id="u_process" class="px-3 py-2 rounded bg-blue-600 text-white">Procesar</button><button id="u_recalc" class="px-3 py-2 rounded bg-gray-100">Reconstruir burndown</button></div>
          <div id="u_msg" class="text-sm text-gray-600">—</div>
        </div>
      </section>
    </main>
  </div>
  <script type="module" src="./js/app.js?v=9"></script>
</body>
</html>
